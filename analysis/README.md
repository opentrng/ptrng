# Analyze and evaluate outputs

This directory contains all analyze and evaluation tools.

> [!TIP]
> For more details on their parameters, call the scripts with `-h`.

## Allan variance

You can compute the Allan Variance using data for a ring oscillator time serie, whether it's obtained from measurements or emulation. The Python script `allanvariance.py` can plot the normalized Allan Variance versus samples accumulation. For instance, you can use the following command to plot the Allan Variance of an emulated ring oscillator:

```
$ python allan_variance.py -t "Plot title" ro.txt allanvar.png
```

![Allan variance example for a 500Mz ring oscillator](../images/allanvariance.png)

Please note that the Allan variance can also be plotted for the COSO counter values to estimate thermal and flicker noise contributions.

## COSO counter distribution

You can visualize the counter values generated by the Coherent Sampling Ring Oscillator (COSO), whether simulated or obtained from the FPGA board, by creating a histogram using the Python script `distribution.py`.

```
$ python distribution.py --log -t "Plot title" coso.txt distribution.png
```

![COSO values with RO pair at 500MHz and 505MHz](../images/cosodistribution.png)

The provided example illustrates the generation of a COSO log-distribution plot using data from `coso_tb.txt`, which is produced through simulation.

## Entropy estimation

Entropy estimators take binary files as input. The script `tobinary.py` can be used to convert ERO, MURO and COSO text output files to binary. This script takes one integer value (0, 1, or n) per line, extracts the less significant bit (LSB) and pack successive bits to bytes.

You can estimate entropy of the generated binary streams with the script `entropy.py` and different estimators:
* Shannon entropy ([Wikipedia](https://en.wikipedia.org/wiki/Entropy_(information_theory)))
* Most Common Value (from [NIST SP800-90B](https://csrc.nist.gov/pubs/sp/800/90/b/final))
* Markov (from [NIST SP800-90B](https://csrc.nist.gov/pubs/sp/800/90/b/final))
* T8 from [BSI AIS 20/31](https://www.bsi.bund.de/dok/randomnumbergenerators) test procedure B

Estimators can be computed for different samples size from 1 to 32 bits.

```
$ python entropy.py -b 8 mcv ero.bin
```

The provided example computes the MCV estimator on 8 bits samples read from the `ero_tb.bin` binary file.

## Auto-correlation

The Python script `autocorrelation.py` plots the autocorrelation for a random binary file, read by words of `b` bits. The `d` parameter limits the maximum lag (depth) of the signal correlation with itself.

```
$ python autocorrelation.py -b 8 -d 100 -t "Plot title" coso.bin autocorr.png
```

This example plots the correlation of the signal with itself in a maximum lag of 100 samples of 8 bits each.

# Howtos and recipies

## How to estimate thermal and flicker noise amplitude factors

## How to run standardized test
